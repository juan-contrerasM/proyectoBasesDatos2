<app-nav-bar [tipoUsuario]="'PROFESOR'"></app-nav-bar>

<div class="container mt-4">
  <h3 class="mb-4 text-center">Preguntas Registradas</h3>

  <div class="accordion" id="preguntasAccordion">
    <div class="accordion-item" *ngFor="let p of preguntas; let i = index">
      <h2 class="accordion-header" [id]="'heading' + i">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                [attr.data-bs-target]="'#collapse' + i" aria-expanded="false" 
                [attr.aria-controls]="'collapse' + i">
          {{ p.CONTENIDO | slice:0:80 }}{{ p.CONTENIDO.length > 80 ? '...' : '' }}
        </button>
      </h2>

      <div [id]="'collapse' + i" class="accordion-collapse collapse" 
           [attr.aria-labelledby]="'heading' + i" data-bs-parent="#preguntasAccordion">
        <div class="accordion-body small text-muted">
          <p><strong>Justificación:</strong> {{ p.JUSTIFICACION | slice:0:150 }}{{ p.JUSTIFICACION.length > 150 ? '...' : '' }}</p>
          <p><strong>Respuesta:</strong> {{ p.RESPUESTA }}</p>
          <p><strong>Dificultad:</strong> {{ p.DIFICULTAD }} | <strong>Tema:</strong> {{ p.TEMA }} | <strong>Tipo:</strong> {{ p.TIPO_PREGUNTA }}</p>
          <p><strong>Tiempo:</strong> {{ p.TIEMPO_RESPUESTA }}s | <strong>% Valor:</strong> {{ p.PORCENTAJE }}% | <strong>Respuestas:</strong> {{ p.NUMERO_RESPUESTAS }}</p>
          
          <div>
            <span *ngIf="p.REQUIEREREVISION == 1" class="badge bg-warning text-dark me-1">Requiere Revisión</span>
            <span class="badge" [ngClass]="p.ESPUBLICA == 1 ? 'bg-success' : 'bg-secondary'">
              {{ p.ESPUBLICA == 1 ? 'Pública' : 'Privada' }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
